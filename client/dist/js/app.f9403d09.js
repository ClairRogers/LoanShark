(function(t){function e(e){for(var a,n,o=e[0],c=e[1],l=e[2],d=0,u=[];d<o.length;d++)n=o[d],i[n]&&u.push(i[n][0]),i[n]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);m&&m(e);while(u.length)u.shift()();return r.push.apply(r,l||[]),s()}function s(){for(var t,e=0;e<r.length;e++){for(var s=r[e],a=!0,n=1;n<s.length;n++){var c=s[n];0!==i[c]&&(a=!1)}a&&(r.splice(e--,1),t=o(o.s=s[0]))}return t}var a={},i={app:0},r=[];function n(t){return o.p+"js/"+({about:"about"}[t]||t)+"."+{about:"d288b4f1"}[t]+".js"}function o(e){if(a[e])return a[e].exports;var s=a[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.e=function(t){var e=[],s=i[t];if(0!==s)if(s)e.push(s[2]);else{var a=new Promise(function(e,a){s=i[t]=[e,a]});e.push(s[2]=a);var r,c=document.createElement("script");c.charset="utf-8",c.timeout=120,o.nc&&c.setAttribute("nonce",o.nc),c.src=n(t),r=function(e){c.onerror=c.onload=null,clearTimeout(l);var s=i[t];if(0!==s){if(s){var a=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src,n=new Error("Loading chunk "+t+" failed.\n("+a+": "+r+")");n.type=a,n.request=r,s[1](n)}i[t]=void 0}};var l=setTimeout(function(){r({type:"timeout",target:c})},12e4);c.onerror=c.onload=r,document.head.appendChild(c)}return Promise.all(e)},o.m=t,o.c=a,o.d=function(t,e,s){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(s,a,function(e){return t[e]}.bind(null,a));return s},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/",o.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=e,c=c.slice();for(var d=0;d<c.length;d++)e(c[d]);var m=l;r.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"034f":function(t,e,s){"use strict";var a=s("64a9"),i=s.n(a);i.a},"0592":function(t,e,s){"use strict";var a=s("9a41"),i=s.n(a);i.a},"0849":function(t,e,s){},"1c72":function(t,e,s){"use strict";var a=s("2ab4"),i=s.n(a);i.a},"2a37":function(t,e,s){"use strict";var a=s("0849"),i=s.n(a);i.a},"2ab4":function(t,e,s){},3112:function(t,e,s){"use strict";var a=s("a0a2"),i=s.n(a);i.a},4678:function(t,e,s){var a={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function i(t){var e=r(t);return s(e)}function r(t){var e=a[t];if(!(e+1)){var s=new Error("Cannot find module '"+t+"'");throw s.code="MODULE_NOT_FOUND",s}return e}i.keys=function(){return Object.keys(a)},i.resolve=r,t.exports=i,i.id="4678"},"56d7":function(t,e,s){"use strict";s.r(e);var a=s("2b0e"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("nav",{staticClass:"navbar navbar-expand-lg navbar-dark bgc"},[a("a",{staticClass:"navbar-brand logo",on:{click:t.goHome}},[a("i",{},[t._v("LoanShark")]),a("img",{attrs:{src:s("62a0"),width:"40px"}})]),t._m(0),a("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarSupportedContent"}},[a("ul",{staticClass:"navbar-nav mr-auto"},[a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link",attrs:{"data-toggle":"collapse","data-target":"#navbarSupportedContent"},on:{click:t.goHome}},[t._v("Home")])]),a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link",attrs:{"data-toggle":"collapse","data-target":"#navbarSupportedContent"},on:{click:t.goContacts}},[t._v("My\n            Contacts")])]),a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link",attrs:{"data-toggle":"collapse","data-target":"#navbarSupportedContent"},on:{click:t.goMessages}},[t._v("Messages\n            "),a("span",[t._v(t._s(t.unreadMessages()))])])]),a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link",attrs:{"data-toggle":"collapse","data-target":"#navbarSupportedContent"},on:{click:t.logOut}},[t._v("Logout")])])]),t.user.name?a("h6",{staticClass:"mx-4 mt-2"},[t._v("Welcome, "+t._s(t.user.name)+".")]):t._e(),a("i",{staticClass:"fas fa-search",attrs:{"data-toggle":"modal","data-target":"#searchModal",title:"Search"},on:{click:t.modalAutoFocus}})])]),a("div",{staticClass:"modal fade",attrs:{id:"searchModal",tabindex:"-1",role:"dialog","aria-labelledby":"searchModalLabel","aria-hidden":"true"},on:{click:function(e){t.searchTerm=""}}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("form",{staticClass:"form-inline my-2 my-lg-0"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchTerm,expression:"searchTerm"}],ref:"search",staticClass:"form-control mr-sm-2",attrs:{type:"search",placeholder:"Find Users","aria-label":"Search"},domProps:{value:t.searchTerm},on:{input:[function(e){e.target.composing||(t.searchTerm=e.target.value)},t.userSearch]}})]),t._m(1)]),a("div",{staticClass:"modal-body"},[a("search")],1),t._m(2)])])]),a("router-view")],1)},r=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"}},[s("span",{staticClass:"navbar-toggler-icon"})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("Close")])])}],n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"search"},[s("div",{staticClass:"row"},t._l(t.results,function(e){return e._id!=t.user._id?s("div",{staticClass:"col-12"},[s("span",{staticClass:"d-flex justify-content-between text-left",attrs:{"data-dismiss":"modal"}},[s("span",{staticClass:"pointer",on:{click:function(s){return t.setActiveProfile(e)}}},[s("img",{staticClass:"sm-img mr-3",attrs:{src:e.image}}),s("b",[t._v(t._s(e.name))])]),t.determineFriendship(e)?s("i",{staticClass:"far fa-check-square"}):s("button",{staticClass:"btn btn-sm btn-info",on:{click:function(s){return t.addFriend(e,t.user)}}},[t._v("Add\n          Contact")])]),s("hr")]):t._e()}),0)])},o=[],c={name:"search",props:[],data(){return{}},computed:{results(){return this.$store.state.searchResults},user(){let t=this.$store.state.user;return this.results,t}},methods:{addFriend(t,e){e.friends.push(t._id),this.$store.dispatch("addFriend",e),this.determineFriendship(t)},setActiveProfile(t){this.$store.dispatch("setActiveProfile",t)},determineFriendship(t,e){return this.user.friends.find(e=>e._id==t._id||e==t._id)}},components:{}},l=c,d=(s("8ba0"),s("2877")),m=Object(d["a"])(l,n,o,!1,null,null,null),u=m.exports,p=s("8c4f"),v=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"home container-fluid"},[s("div",{staticClass:"row mt-4"},[s("div",{staticClass:"col-12 col-md-6 offset-md-3 white"},[s("div",{staticClass:"row py-3"},[s("div",{staticClass:"col-6"},[s("img",{staticClass:"round ml-3 img-fluid",attrs:{src:t.user.image,alt:"User image"}})]),s("div",{staticClass:"col-6"},[t._m(0),s("h2",{staticClass:"mt-4"},[t._v(t._s(t.user.name)+" "),t.user.paypal?s("span",[s("i",{staticClass:"fab fa-paypal fa-xs ml-1 faded noClick",attrs:{title:"PayPal verified"}})]):t._e()]),s("h5",[t._v("User Rating:")]),s("div",{staticClass:"progress"},[s("div",{staticClass:"progress-bar",style:{width:t.barWidth+"%"},attrs:{role:"progressbar","aria-valuenow":t.score,"aria-valuemin":"0","aria-valuemax":"100"}},[t._v(t._s(t.score)+"%")])])])]),s("div",{staticClass:"row mx-0"},[s("div",{staticClass:"col-12"},[s("p",{staticClass:"mt-3 mx-3 text-justify"},[t._v(t._s(t.user.bio))]),s("hr"),t.showCurrent?s("button",{staticClass:"btn btn-info",on:{click:function(e){t.showCurrent=!t.showCurrent}}},[t._v("View Active\n            Contracts")]):s("button",{staticClass:"btn btn-info mb-3",on:{click:function(e){t.showCurrent=!t.showCurrent}}},[t._v("View Completed\n            Contracts")]),t.showCurrent?t._e():s("h4",{staticClass:"text-center d-flex justify-content-around"},[s("span",{staticClass:"pointer font",class:t.showContracts?"selected":"",on:{click:function(e){t.showContracts=!0}}},[t._v("My Lends")]),s("span",{staticClass:"pointer font",class:t.showContracts?"":"selected",on:{click:function(e){t.showContracts=!1}}},[t._v("My\n              Borrows")])]),t.showCurrent?s("completed",{attrs:{user:t.user}}):s("div",[s("transition",{attrs:{name:t.showContracts?"first-slide":"second-slide",mode:"out-in"}},[t.showContracts?s("lends",{attrs:{user:t.user}}):t._e(),t.showContracts?t._e():s("borrows",{attrs:{user:t.user}})],1)],1)],1)])])]),s("editmodal")],1)},h=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("h5",{staticClass:"text-right faded"},[s("i",{staticClass:"far fa-edit",attrs:{"data-toggle":"modal","data-target":"#editModal",title:"edit"}})])}],g=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"Lends row"},[t.lends.length<1?s("div",{staticClass:"col text-center"},[s("p",{staticClass:"mt-3"},[t._v("You have no active lends")])]):s("div",{staticClass:"col-12"},t._l(t.lends,function(e){return s("div",{staticClass:"card pointer my-3",attrs:{"data-toggle":"modal","data-target":"#viewmodal"},on:{click:function(s){return t.setActiveAg(e)}}},[s("h5",{staticClass:"card-header"},[t._v("Lending to: "),s("img",{staticStyle:{"border-radius":"50%"},attrs:{width:"30px",src:e.borrower.image}}),t._v("\n        "+t._s(e.borrower.name))]),s("div",{staticClass:"card-body text-left"},[s("h5",{staticClass:"card-title"},[t._v(t._s(e.title))]),s("h6",[t._v("Item: "+t._s(e.item))]),s("p",{staticClass:"card-text"},[t._v(t._s(e.description))]),s("hr"),s("p",{staticClass:"text-center",class:[t.isOverdue(e)?"text-danger":"text-black-50"]},[s("i",[t._v("Due: "+t._s(t.moment(e.updatedAt).add(e.timeRemaining,"days").calendar()))])])])])}),0),s("viewmodal")],1)},f=[],b=s("c1df"),_=s.n(b),C=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.activeAg.description?s("div",{staticClass:"viewmodal"},[s("div",{staticClass:"modal fade",attrs:{id:"viewmodal",tabindex:"-1",role:"dialog","aria-labelledby":"viewmodalTitle","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[s("div",{staticClass:"modal-content"},[s("div",{staticClass:"modal-header"},[s("h5",{staticClass:"modal-title",attrs:{id:"viewmodalTitle"}},[t._v(t._s(t.activeAg.title))]),t._m(0)]),s("div",{staticClass:"modal-body"},[s("div",{staticClass:"d-flex justify-content-between mb-3"},[s("span",[t._v("Lender: "),s("img",{staticStyle:{"border-radius":"50%"},attrs:{width:"30px",src:t.activeAg.lender.image}}),t._v(" "+t._s(t.activeAg.lender.name))]),s("span",[t._v("Borrower: "),s("img",{staticStyle:{"border-radius":"50%"},attrs:{width:"30px",src:t.activeAg.borrower.image}}),t._v("\n              "+t._s(t.activeAg.borrower.name))])]),s("h5",[t._v("Item: "+t._s(t.activeAg.item))]),s("p",[t._v(t._s(t.activeAg.description))]),s("hr"),t.activeAg.terms.length>0?s("h5",[t._v("Terms:")]):t._e(),t._l(t.activeAg.terms,function(e){return s("li",[t._v(t._s(e.description))])})],2),s("div",{staticClass:"modal-footer"},[s("span",[t.activeAg.authorId==t.user._id&&0==t.activeAg.closed?s("button",{staticClass:"btn btn-info",attrs:{type:"button"},on:{click:function(e){return t.closeContract()}}},[t._v("Mark\n              Contract as Finished")]):t._e()]),s("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("Close")])])])])])]):t._e()},w=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])}],y=s("3d20"),j=s.n(y),A={name:"viewmodal",props:[],data(){return{}},computed:{activeAg(){return this.$store.state.activeAg},user(){return this.$store.state.user}},methods:{sendRating(t){t&&(console.log(t),this.$store.dispatch("updateRating",{score:t,_id:this.activeAg.borrower._id}),this.$store.dispatch("closeAg",this.activeAg),j.a.fire({text:"Thanks for rating! Your contract is now complete."}))},async closeContract(){const t=new Promise(t=>{setTimeout(()=>{t({1:"1",2:"2",3:"3",4:"4",5:"5"})},1e3)}),{value:e}=await j.a.fire({title:"Rate User",text:"Please rate your overall experience with this user (1 being terrible and 5 being excellent):",input:"radio",showCancelButton:!0,inputOptions:t,inputValidator:t=>{if(!t)return"You need to choose something!"}});this.sendRating(e)}},components:{Swal:j.a}},x=A,M=Object(d["a"])(x,C,w,!1,null,null,null),k=M.exports,P={name:"Lends",props:["user"],data(){return{}},computed:{lends(){return this.$store.state.activeDeals.filter(t=>t.lender._id==this.user._id).filter(t=>0==t.closed)}},methods:{setActiveAg(t){this.$store.dispatch("setActiveAg",t)},isOverdue(t){let e=_()(t.updatedAt).add(t.timeRemaining,"days").format("YYYYMMDD"),s=_()().format("YYYYMMDD");return e<s}},components:{viewmodal:k}},U=P,D=(s("0592"),Object(d["a"])(U,g,f,!1,null,null,null)),S=D.exports,O=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"Borrows row"},[t.borrows.length<1?s("div",{staticClass:"col text-center"},[s("p",{staticClass:"mt-3"},[t._v("You have no active borrows")])]):s("div",{staticClass:"col-12"},t._l(t.borrows,function(e){return s("div",{staticClass:"card my-3 pointer",attrs:{"data-toggle":"modal","data-target":"#viewmodal"},on:{click:function(s){return t.setActiveAg(e)}}},[s("h5",{staticClass:"card-header"},[t._v("Borrowing from: "),s("img",{staticStyle:{"border-radius":"50%"},attrs:{width:"30px",src:e.lender.image}}),t._v("\n        "+t._s(e.lender.name))]),s("div",{staticClass:"card-body text-left"},[s("h5",{staticClass:"card-title"},[t._v(t._s(e.title))]),s("h6",[t._v("Item: "+t._s(e.item))]),s("p",{staticClass:"card-text"},[t._v(t._s(e.description))]),s("hr"),s("p",{staticClass:"text-center",class:[t.isOverdue(e)?"text-danger":"text-black-50"]},[s("i",[t._v("Due: "+t._s(t.moment(e.updatedAt).add(e.timeRemaining,"days").calendar()))])])])])}),0),s("viewmodal")],1)},F=[],R={name:"Borrows",props:["user"],data(){return{}},computed:{borrows(){return this.$store.state.activeDeals.filter(t=>t.borrower._id==this.user._id).filter(t=>0==t.closed)}},methods:{setActiveAg(t){this.$store.dispatch("setActiveAg",t)},isOverdue(t){let e=_()(t.updatedAt).add(t.timeRemaining,"days").format("YYYYMMDD"),s=_()().format("YYYYMMDD");return e<s}},components:{viewmodal:k}},T=R,E=Object(d["a"])(T,O,F,!1,null,null,null),N=E.exports,L=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"edit-modal"},[s("div",{staticClass:"modal fade",attrs:{id:"editModal",tabindex:"-1",role:"dialog","aria-labelledby":"editModalTitle","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"}},[s("div",{staticClass:"modal-content"},[t._m(0),s("div",{staticClass:"modal-body text-left"},[s("form",{on:{submit:function(e){return e.preventDefault(),t.editProfile(t.user)}}},[t._v("\n            Name:\n            "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.editedUser.name,expression:"editedUser.name"}],staticClass:"form-control mb-3",attrs:{type:"text",placeholder:""},domProps:{value:t.editedUser.name},on:{input:function(e){e.target.composing||t.$set(t.editedUser,"name",e.target.value)}}}),t._v("\n            Description:\n            "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.editedUser.bio,expression:"editedUser.bio"}],staticClass:"form-control mb-3",attrs:{type:"text",placeholder:""},domProps:{value:t.editedUser.bio},on:{input:function(e){e.target.composing||t.$set(t.editedUser,"bio",e.target.value)}}}),t._v("\n            Email:\n            "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.editedUser.email,expression:"editedUser.email"}],staticClass:"form-control mb-3",attrs:{type:"text",placeholder:""},domProps:{value:t.editedUser.email},on:{input:function(e){e.target.composing||t.$set(t.editedUser,"email",e.target.value)}}}),t._v("\n            Profile Image (URL):\n            "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.editedUser.image,expression:"editedUser.image"}],staticClass:"form-control mb-3",attrs:{type:"text",placeholder:""},domProps:{value:t.editedUser.image},on:{input:function(e){e.target.composing||t.$set(t.editedUser,"image",e.target.value)}}}),t._v("\n            PayPal™ Email: "),s("i",{staticClass:"fas fa-question-circle fa-sm noClick faded",attrs:{title:"Please use the email associated with your verified PayPal account"}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.editedUser.paypal,expression:"editedUser.paypal"}],staticClass:"form-control",attrs:{type:"text",placeholder:""},domProps:{value:t.editedUser.paypal},on:{input:function(e){e.target.composing||t.$set(t.editedUser,"paypal",e.target.value)}}}),s("button",{staticClass:"btn btn-info mt-3 text-right",attrs:{type:"submit"}},[t._v("Save changes")])])]),t._m(1)])])])])},Y=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"modal-header"},[s("h5",{staticClass:"modal-title",attrs:{id:"editModalTitle"}},[t._v("Edit Profile")]),s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("Close")])])}],I={name:"edit-modal",mounted(){this.modalAutoFocus},props:[],data(){return{editedUser:{_id:""}}},computed:{user(){return this.$store.state.user}},methods:{modalAutoFocus(){$("#editModule").on("shown.bs.modal",function(){$(this).find("input:first").focus()})},editProfile(t){this.editedUser._id=t._id,this.$store.dispatch("editProfile",this.editedUser)}},components:{}},z=I,B=Object(d["a"])(z,L,Y,!1,null,null,null),q=B.exports,W=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"CompletedContracts row d-flex justify-content-center"},[s("h4",{staticClass:"font selected mt-3"},[t._v("Completed Contracts")]),t.completedAgs.length<1?s("div",[s("p",[t._v("You have no completed contracts")])]):s("div",{staticClass:"col-12"},t._l(t.completedAgs,function(e){return s("div",{staticClass:"card pointer my-3",attrs:{"data-toggle":"modal","data-target":"#viewmodal"},on:{click:function(s){return t.setActiveAg(e)}}},[t.user._id==e.borrower._id?s("h5",{staticClass:"card-header"},[t._v("Borrowed from: "),s("img",{staticStyle:{"border-radius":"50%"},attrs:{width:"30px",src:e.lender.image}}),t._v("\n        "+t._s(e.lender.name))]):t.user._id==e.lender._id?s("h5",{staticClass:"card-header"},[t._v("Lended to: "),s("img",{staticStyle:{"border-radius":"50%"},attrs:{width:"30px",src:e.borrower.image}}),t._v("\n        "+t._s(e.borrower.name))]):t._e(),s("div",{staticClass:"card-body text-left"},[s("div",{staticClass:"d-flex justify-content-between"},[s("div",[s("h5",{staticClass:"card-title"},[t._v(t._s(e.title))]),s("h6",[t._v("Item: "+t._s(e.item))]),s("p",{staticClass:"card-text"},[t._v(t._s(e.description))])]),t.user._id==e.borrower._id?s("div",{staticClass:" d-flex flex-column justify-content-center"},[s("button",{staticClass:"btn btn-danger",attrs:{"data-dismiss":"modal"},on:{click:function(s){return s.stopPropagation(),t.rateLender(e)}}},[t._v("Rate Lender")])]):t._e()]),s("hr"),s("p",{staticClass:"text-center"},[s("i",[t._v("Closed: "+t._s(t.moment(e.updatedAt).calendar()))])])])])}),0),s("viewmodal")],1)},J=[],V={name:"CompletedContracts",props:["user"],data(){return{}},computed:{completedAgs(){return this.$store.state.completedDeals}},methods:{setActiveAg(t){this.$store.dispatch("setActiveAg",t)},async rateLender(t){const e=new Promise(t=>{setTimeout(()=>{t({1:"1",2:"2",3:"3",4:"4",5:"5"})},1e3)}),{value:s}=await j.a.fire({title:"Rate User",text:"Please rate your overall experience with this user (1 being terrible and 5 being excellent):",input:"radio",showCancelButton:!0,inputOptions:e,inputValidator:e=>{if(!e)return"You need to choose something!";this.$store.dispatch("updateRating",{score:e,_id:t.lender._id}),j.a.fire({text:"Thanks for rating!"})}})}},components:{viewmodal:k,Swal:j.a}},H=V,G=(s("9a5c"),Object(d["a"])(H,W,J,!1,null,null,null)),K=G.exports,Q={name:"home",mounted(){this.$store.dispatch("getActiveDeals"),this.$store.dispatch("getCompletedDeals")},created(){this.$store.state.user,this.$store.state.user._id?this.$router.push({name:"home"}):this.$router.push({name:"login"})},data(){return{userId:"",showContracts:!0,barWidth:0,showCurrent:!1}},components:{Lends:S,Borrows:N,Editmodal:q,Completed:K},methods:{logout(){this.$store.dispatch("logOut")},die(){this.$store.dispatch("deleteUser",this.userId)}},computed:{user(){return this.$store.state.user},score(){if(this.$store.state.user.score){let t=this.$store.state.user.score,e=0,s=0;for(let a=0;a<t.length;a++)e+=t[a].rating,s=e/t.length*20;return this.barWidth=s.toFixed(),s.toFixed()}}}},X=Q,Z=(s("cccb"),Object(d["a"])(X,v,h,!1,null,null,null)),tt=Z.exports,et=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"login container-fluid login-forms"},[t._m(0),s("div",{staticClass:"row"},[s("div",{staticClass:"form-container col-12 d-flex align-items-end justify-content-center"},[s("div",[s("h4",{staticClass:"mb-4"},[t._v("Welcome to LoanShark!")]),t.loginForm?s("form",{on:{submit:function(e){return e.preventDefault(),t.loginUser(e)}}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.creds.email,expression:"creds.email"}],staticClass:"mx-2 login-form",attrs:{type:"email",placeholder:"email"},domProps:{value:t.creds.email},on:{input:function(e){e.target.composing||t.$set(t.creds,"email",e.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.creds.password,expression:"creds.password"}],staticClass:"mx-2 login-form",attrs:{type:"password",placeholder:"password"},domProps:{value:t.creds.password},on:{input:function(e){e.target.composing||t.$set(t.creds,"password",e.target.value)}}}),s("br"),s("button",{staticClass:"btn btn-outline-success mt-3 text-center",attrs:{type:"submit"}},[t._v("Login")])]):s("form",{staticClass:"mt-2 text-center",on:{submit:function(e){return e.preventDefault(),t.register(e)}}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.newUser.name,expression:"newUser.name"}],staticClass:"login-form mx-2",attrs:{type:"text",placeholder:"name"},domProps:{value:t.newUser.name},on:{input:function(e){e.target.composing||t.$set(t.newUser,"name",e.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.newUser.email,expression:"newUser.email"}],staticClass:"login-form mx-2",attrs:{type:"email",placeholder:"email"},domProps:{value:t.newUser.email},on:{input:function(e){e.target.composing||t.$set(t.newUser,"email",e.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.newUser.password,expression:"newUser.password"}],staticClass:"login-form mx-2",attrs:{type:"password",placeholder:"password"},domProps:{value:t.newUser.password},on:{input:function(e){e.target.composing||t.$set(t.newUser,"password",e.target.value)}}}),s("br"),s("button",{staticClass:"btn btn-outline-success mt-3 text-center",attrs:{type:"submit"}},[t._v("Create Account")])])])])]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 form-container col-12 d-flex align-items-start justify-content-center"},[s("div",{staticClass:" action mt-3",on:{click:function(e){t.loginForm=!t.loginForm}}},[t.loginForm?s("p",[t._v("No account? Click here to Register")]):s("p",[t._v("Already have an account? Click here to Login")])])])])])},st=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row"},[s("div",{staticClass:"col-12"})])}],at={name:"login",data(){return{loginForm:!0,creds:{email:"",password:""},newUser:{email:"",password:"",name:""}}},methods:{register(){this.$store.dispatch("register",this.newUser)},loginUser(){this.$store.dispatch("login",this.creds)},logout(){this.$store.dispatch("logOut")}}},it=at,rt=(s("1c72"),Object(d["a"])(it,et,st,!1,null,"6d36f8ea",null)),nt=rt.exports,ot=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"Profile container-fluid"},[s("div",{staticClass:"row mt-4"},[s("div",{staticClass:"col-12 col-md-6 offset-md-3 white"},[s("div",{staticClass:"row py-3"},[s("div",{staticClass:"col-6"},[s("img",{staticClass:"round ml-3 img-fluid",attrs:{src:t.activeProfile.image,alt:"User image"}})]),s("div",{staticClass:"col-6 pr-4"},[s("h2",{staticClass:"mt-4"},[t._v(t._s(t.activeProfile.name)+" "),t.activeProfile.paypal?s("i",{staticClass:"fab fa-paypal fa-xs ml-1 faded",attrs:{title:"PayPal verified"}}):t._e()]),s("h5",[t._v("User Rating:")]),s("div",{staticClass:"progress"},[s("div",{staticClass:"progress-bar",style:{width:t.barWidth+"%"},attrs:{role:"progressbar","aria-valuenow":"25","aria-valuemin":"0","aria-valuemax":"100"}},[t._v(t._s(t.score)+"%")])])])]),s("div",{staticClass:"row mx-0 pb-3"},[s("div",{staticClass:"col-12"},[s("p",{staticClass:"mt-3 mx-3 text-justify"},[t._v(t._s(t.activeProfile.bio))]),t.determineFriendship(t.activeProfile)?s("button",{staticClass:"btn btn-sm btn-danger",on:{click:function(e){return t.removeFriend(t.activeProfile._id)}}},[t._v("Remove\n            Contact")]):s("button",{staticClass:"btn btn-sm btn-info",on:{click:function(e){return t.addFriend(t.activeProfile,t.user)}}},[t._v("Add\n            Contact")]),s("hr"),s("button",{staticClass:"btn btn-info mt-2",attrs:{"data-toggle":"modal","data-target":"#agreementModal"}},[t._v("Make a deal")]),s("Agreement",{attrs:{profileId:t.activeProfile._id,user:t.user}})],1)])])])])},ct=[],lt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"agreement"},[s("div",{staticClass:"modal fade",attrs:{id:"agreementModal",tabindex:"-1",role:"dialog","aria-labelledby":"agreementModalLabel","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[s("div",{staticClass:"modal-content"},[t._m(0),s("div",{staticClass:"modal-body text-left"},[s("form",{on:{submit:function(e){return e.preventDefault(),t.initiateAgreement(e)}}},[s("h6",[t._v("Title:")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.newAgreement.title,expression:"newAgreement.title"}],staticClass:"form-control mb-3",attrs:{type:"text",required:"",disabled:t.activeAg.initiated},domProps:{value:t.newAgreement.title},on:{input:function(e){e.target.composing||t.$set(t.newAgreement,"title",e.target.value)}}}),s("h6",[t._v("Item:")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.newAgreement.item,expression:"newAgreement.item"}],staticClass:"form-control mb-3",attrs:{type:"text",required:"",disabled:t.activeAg.initiated},domProps:{value:t.newAgreement.item},on:{input:function(e){e.target.composing||t.$set(t.newAgreement,"item",e.target.value)}}}),s("h6",[t._v("Description:")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.newAgreement.description,expression:"newAgreement.description"}],staticClass:"form-control mb-4",attrs:{required:"",type:"text","aria-label":"Large","aria-describedby":"inputGroup-sizing-sm",disabled:t.activeAg.initiated},domProps:{value:t.newAgreement.description},on:{input:function(e){e.target.composing||t.$set(t.newAgreement,"description",e.target.value)}}}),t.activeAg.initiated?t._e():s("button",{staticClass:"btn btn-info",attrs:{type:"submit"}},[t._v("Start\n              Agreement")])]),s("ol",{staticClass:"text-left mt-4"},t._l(t.newAgreement.terms,function(e){return s("li",[t._v(t._s(e.description))])}),0),t.showDetails?s("form",[t.showDetails?s("div",{staticClass:"input-group my-5"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.term.description,expression:"term.description"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.term.description},on:{input:function(e){e.target.composing||t.$set(t.term,"description",e.target.value)}}}),s("br"),s("button",{staticClass:"btn btn-info",on:{click:function(e){return e.preventDefault(),t.addTerm(e)}}},[t._v("Commit Term")])]):t._e(),s("hr"),s("div",{staticClass:"input-group mb-2 mr-sm-2"},[t._m(1),s("input",{directives:[{name:"model",rawName:"v-model",value:t.newAgreement.timeRemaining,expression:"newAgreement.timeRemaining"}],staticClass:"form-control",attrs:{type:"number",placeholder:"Days"},domProps:{value:t.newAgreement.timeRemaining},on:{input:function(e){e.target.composing||t.$set(t.newAgreement,"timeRemaining",e.target.value)}}})])]):t._e()]),s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("Close")]),s("button",{staticClass:"btn btn-info",attrs:{type:"button","data-dismiss":"modal"},on:{click:t.editAgreement}},[t._v("Update\n            Agreement")])])])])])])},dt=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"modal-header"},[s("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v("Initiate an Agreement")]),s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"input-group-prepend"},[s("div",{staticClass:"input-group-text"},[t._v("Number of Days")])])}],mt={name:"agreement",props:["profileId","user"],data(){return{newAgreement:{item:"",title:"",description:"",authorId:this.user._id,terms:[],lender:this.user._id,borrower:this.profileId,timeRemaining:0,initiated:!0},showDetails:!1,term:{authorId:this.user._id,description:"",agreedUpon:!0},editTerm:!1}},computed:{activeAg(){return this.$store.state.activeAg}},methods:{initiateAgreement(){this.$store.dispatch("initiateAgreement",this.newAgreement),this.showDetails=!this.showDetails},editAgreement(){this.newAgreement._id=this.$store.state.activeAg._id,this.newAgreement.sent=!this.newAgreement.sent;let t=JSON.parse(JSON.stringify(this.newAgreement));this.$store.dispatch("editAgreement",t),this.newAgreement.title="",this.newAgreement.item="",this.newAgreement.description="",this.newAgreement.terms=[],this.showDetails=!1,delete this.newAgreement._id,this.$store.dispatch("setActiveAg",{}),j.a.fire("Agreement Sent!","Now awaiting their reply.","success")},addTerm(){let t=JSON.parse(JSON.stringify(this.term));this.newAgreement.terms.push(t),this.term.description=""}},components:{}},ut=mt,pt=Object(d["a"])(ut,lt,dt,!1,null,null,null),vt=pt.exports,ht={name:"Profile",props:["profileId"],data(){return{barWidth:0}},computed:{activeProfile(){return this.$store.state.activeProfile},user(){return this.$store.state.user},score(){if(this.$store.state.activeProfile.score){let t=this.$store.state.activeProfile.score,e=0,s=0;for(let a=0;a<t.length;a++)e+=t[a].rating,s=e/t.length*20;return this.barWidth=s.toFixed(),s.toFixed()}}},methods:{addFriend(t,e){e.friends.push(t._id),this.$store.dispatch("addFriend",e),this.determineFriendship(t)},determineFriendship(t,e){return this.user.friends?this.user.friends.find(e=>e._id==t._id||e==t._id):void 0},removeFriend(t){this.$store.dispatch("removeFriend",{userId:this.user._id,friendId:t})}},components:{Agreement:vt}},gt=ht,ft=(s("2a37"),Object(d["a"])(gt,ot,ct,!1,null,null,null)),bt=ft.exports,_t=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"messages container-fluid"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 col-md-8 offset-md-2"},[s("h3",{staticClass:"my-3 d-flex justify-content-around"},[s("span",{staticClass:"font pointer",class:t.showMessages?"selected":"",on:{click:function(e){t.showMessages=!0}}},[t._v("Pending\n          Lends")]),s("span",{staticClass:"font pointer",class:t.showMessages?"":"selected",on:{click:function(e){t.showMessages=!1}}},[t._v("Pending\n          Borrows")])]),s("transition",{attrs:{name:t.showMessages?"first-slide":"second-slide",mode:"out-in"}},[t.showMessages?s("div",t._l(t.lendMessages,function(e){return s("div",{staticClass:"card text-center my-2"},[s("div",{staticClass:"card-header"},[s("h3",[t._v(t._s(e.borrower.name))])]),s("div",{staticClass:"card-body"},[s("h5",{staticClass:"card-title"},[t._v("Item: "+t._s(e.item))]),s("p",{staticClass:"card-text"},[t._v(t._s(e.description))]),s("button",{staticClass:"btn btn-sm btn-info mr-1",attrs:{type:"button","data-toggle":"modal","data-target":"#contractModal"},on:{click:function(s){return t.setActiveMessage(e)}}},[t._v("View\n                Contract")]),s("button",{staticClass:"btn btn-sm btn-danger",on:{click:function(s){return t.deleteAg(e)}}},[t._v("Delete")]),1==e.sent?s("h5",{staticClass:"mt-3"},[t._v("Awaiting Reply...")]):s("h5",{staticClass:"mt-3",staticStyle:{color:"#2fcf2f"}},[t._v("Your Turn to Reply!")])]),s("div",{staticClass:"card-footer text-muted d-flex justify-content-around"},[s("p",[t._v("Lent To: "+t._s(e.borrower.name))]),s("p",[t._v("From: "+t._s(e.lender.name))])])])}),0):t._e(),t.showMessages?t._e():s("div",t._l(t.borrowMessages,function(e){return s("div",{staticClass:"card text-center my-2"},[s("div",{staticClass:"card-header"},[s("h3",[t._v(t._s(e.title))])]),s("div",{staticClass:"card-body"},[s("h5",{staticClass:"card-title"},[t._v("For: "+t._s(e.item))]),s("p",{staticClass:"card-text"},[t._v(t._s(e.description))]),s("button",{staticClass:"btn btn-sm btn-info mr-1",attrs:{"data-toggle":"modal","data-target":"#contractModal"},on:{click:function(s){return t.setActiveMessage(e)}}},[t._v("View\n                Contract")]),s("button",{staticClass:"btn btn-sm btn-danger",on:{click:function(s){return t.deleteAg(e)}}},[t._v("Delete")]),0==e.sent?s("h5",{staticClass:"mt-3"},[t._v("Awaiting Reply...")]):s("h5",{staticClass:"mt-3",staticStyle:{color:"#2fcf2f"}},[t._v("Your Turn to Reply!")])]),s("div",{staticClass:"card-footer text-muted d-flex justify-content-around"},[s("p",[t._v("To: "+t._s(e.borrower.name))]),s("p",[t._v("From: "+t._s(e.lender.name))])])])}),0)])],1)]),s("Contract")],1)},Ct=[],wt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"contract"},[s("div",{staticClass:"modal fade",attrs:{id:"contractModal",tabindex:"-1",role:"dialog","aria-labelledby":"contractModalLabel","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[s("div",{staticClass:"modal-content"},[s("div",{staticClass:"modal-header"},[s("h5",{staticClass:"modal-title",attrs:{id:"contractModalLabel"}},[t._v(t._s(t.activeMessage.title))]),t._m(0)]),t.activeMessage.description?s("div",{staticClass:"modal-body"},[s("div",{staticClass:"d-flex justify-content-between mb-3"},[s("span",[t._v("Lender: "+t._s(t.activeMessage.lender.name))]),s("span",[t._v("Borrower: "+t._s(t.activeMessage.borrower.name))])]),s("h3",[t._v(t._s(t.activeMessage.item))]),s("h4",[t._v(t._s(t.activeMessage.description))]),s("h6",[t._v("Duration of contract: "+t._s(t.activeMessage.timeRemaining))])]):t._e(),t._l(t.terms,function(e){return s("div",[e.oldDescription?s("li",{staticClass:"text-left ml-3 mb-1 OD"},[s("i",[t._v(t._s(e.oldDescription))])]):t._e(),s("div",{staticClass:"input-group mb-3"},[s("div",{staticClass:"input-group-prepend"},[s("div",{staticClass:"input-group-text"},[s("input",{attrs:{type:"checkbox","aria-label":"Checkbox for following text input",checked:"",disabled:!e.agreedUpon||!t.determineAccess()},on:{click:function(t){e.agreedUpon=!1,e.oldDescription=e.description}}})])]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.description,expression:"term.description"}],staticClass:"form-control",attrs:{type:"text","aria-label":"Text input with checkbox",disabled:e.agreedUpon},domProps:{value:e.description},on:{input:function(s){s.target.composing||t.$set(e,"description",s.target.value)}}})])])}),s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn btn-success btn-sm",attrs:{disabled:!t.determineAccess()||t.editedTerm(),"data-dismiss":"modal"},on:{click:t.agree}},[t._v("Agree to Terms")]),s("button",{staticClass:"btn btn-info btn-sm",attrs:{disabled:!t.determineAccess()||!t.editedTerm(),"data-dismiss":"modal"},on:{click:t.renegotiate}},[t._v("Renegotiate")]),s("button",{staticClass:"btn btn-danger btn-sm",attrs:{type:"button","data-dismiss":"modal"},on:{click:function(e){return t.deleteAg(t.activeMessage)}}},[t._v("I'm Out!")]),s("button",{staticClass:"btn btn-secondary btn-sm",attrs:{type:"button","data-dismiss":"modal"}},[t._v("Close")])])],2)])])])},yt=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])}],jt={name:"contract",props:[],data(){return{}},computed:{activeMessage(){return this.$store.state.activeMessage},terms(){return this.$store.state.activeMessage.terms},user(){return this.$store.state.user}},methods:{renegotiate(){for(let t=0;t<this.terms.length;t++)this.terms[t].agreedUpon=!0;this.activeMessage.sent=!this.activeMessage.sent,this.$store.dispatch("editAgreement",this.activeMessage),j.a.fire("Contract Sent!","Now awaiting their reply.","success")},agree(){this.activeMessage.agreedUpon=!0,this.$store.dispatch("acceptAgreement",this.activeMessage)},determineAccess(){if(this.$store.state.activeMessage.description)return this.activeMessage.lender._id==this.user._id&&0==this.activeMessage.sent||this.activeMessage.borrower._id==this.user._id&&1==this.activeMessage.sent},deleteAg(t){this.$store.dispatch("deleteAg",t)},editedTerm(){return!!this.terms.find(t=>0==t.agreedUpon)}},components:{}},At=jt,xt=(s("f90e"),Object(d["a"])(At,wt,yt,!1,null,null,null)),$t=xt.exports,Mt={name:"messages",mounted(){this.$store.dispatch("getMessages")},props:[],data(){return{showMessages:!0}},computed:{lendMessages(){let t=this.$store.state.user;return this.$store.state.messages.filter(e=>e.lender._id==t._id)},borrowMessages(){let t=this.$store.state.user;return this.$store.state.messages.filter(e=>e.borrower._id==t._id)},user(){return this.$store.state.user}},methods:{deleteAg(t){j.a.fire({title:"Are you sure?",text:"This cancels your contract. You won't be able to undo this action!",type:"warning",showCancelButton:!0,confirmButtonColor:"#138496",cancelButtonColor:"#6c757d",confirmButtonText:"Yes, delete it!"}).then(e=>{e.value&&(j.a.fire("Deleted!","Your contract has been terminated.","success"),this.$store.dispatch("deleteAg",t))})},setActiveMessage(t){this.$store.dispatch("setActiveMessage",t)}},components:{Contract:$t}},kt=Mt,Pt=(s("3112"),Object(d["a"])(kt,_t,Ct,!1,null,null,null)),Ut=Pt.exports,Dt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"contacts container-fluid"},[s("h2",{staticClass:"text-center logo mt-4"},[t._v("Contacts")]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 col-md-6 offset-md-3"},[s("div",{staticClass:"row mt-4"},t._l(t.friends,function(e){return s("div",{staticClass:"col-6"},[s("div",{staticClass:"card mb-3 pointer",staticStyle:{"max-width":"540px"},on:{click:function(s){return t.setActiveProfile(e)}}},[s("div",{staticClass:"row no-gutters"},[s("div",{staticClass:"col-md-4"},[s("img",{staticClass:"card-img img-fluid",staticStyle:{"border-radius":"50%"},attrs:{src:e.image,width:"150px"}})]),s("div",{staticClass:"col-md-8"},[s("div",{staticClass:"card-body"},[s("h5",{staticClass:"card-title"},[t._v(t._s(e.name))]),s("p",[t._v(t._s(e.email))]),s("button",{staticClass:"btn btn-danger btn-sm",on:{click:function(s){return s.stopPropagation(),t.removeFriend(e._id)}}},[t._v("Remove Contact")])])])])])])}),0)])])])},St=[],Ot={name:"contacts",props:[],data(){return{}},computed:{friends(){return this.$store.state.user.friends},user(){return this.$store.state.user}},methods:{removeFriend(t){this.$store.dispatch("removeFriend",{userId:this.user._id,friendId:t})},setActiveProfile(t){this.$store.dispatch("setActiveProfile",t)}},components:{}},Ft=Ot,Rt=Object(d["a"])(Ft,Dt,St,!1,null,null,null),Tt=Rt.exports;a["a"].use(p["a"]);var Et=new p["a"]({routes:[{path:"/",name:"home",component:tt},{path:"*",redirect:"/"},{path:"/about",name:"about",component:function(){return s.e("about").then(s.bind(null,"f820"))}},{path:"/login",name:"login",component:nt},{path:"/profile/:profileId",name:"profile",props:!0,component:bt},{path:"/messages",name:"messages",component:Ut},{path:"/contacts",name:"contacts",component:Tt}]});const{debounce:Nt}=s("db5d");var Lt={name:"App",mounted(){this.$store.dispatch("authenticate"),this.$store.dispatch("getMessages")},data(){return{searchTerm:""}},methods:{results(){return this.$store.state.searchResults},logOut(){this.$store.dispatch("logOut")},userSearch(){let t=Nt(t=>{this.$store.dispatch("searchUser",this.searchTerm)},300);t()},modalAutoFocus(){$("#searchModal").on("shown.bs.modal",function(){$(this).find("input:first").focus()}),this.userSearch("")},goHome(){Et.push({name:"home"})},goMessages(){Et.push({name:"messages"})},goContacts(){Et.push({name:"contacts"})},unreadMessages(){return this.lendMessages.length+this.borrowMessages.length==0?"":`(${this.lendMessages.length+this.borrowMessages.length})`}},components:{search:u,router:Et},computed:{lendMessages(){let t=this.$store.state.user;return this.$store.state.messages.filter(e=>e.lender._id==t._id).filter(t=>0==t.sent)},borrowMessages(){let t=this.$store.state.user;return this.$store.state.messages.filter(e=>e.borrower._id==t._id).filter(t=>1==t.sent)},user(){return this.$store.state.user}}},Yt=Lt,It=(s("034f"),Object(d["a"])(Yt,i,r,!1,null,null,null)),zt=It.exports,Bt=s("2f62"),qt=s("bc3a"),Wt=s.n(qt);a["a"].use(Bt["a"]);let Jt=window.location.host.includes("localhost:8080")?"//localhost:3000/":"/",Vt=Wt.a.create({baseURL:Jt+"auth/",timeout:3e3,withCredentials:!0}),Ht=Wt.a.create({baseURL:Jt+"api/",timeout:3e3,withCredentials:!0});var Gt=new Bt["a"].Store({state:{user:{},searchResults:[],activeProfile:{},messages:[],activeAg:{},activeMessage:{},activeDeals:[],completedDeals:[]},mutations:{setUser(t,e){t.user=e},setSearchResults(t,e){t.searchResults=e},setActiveProfile(t,e){t.activeProfile=e},setMessages(t,e){t.messages=e},setActiveAg(t,e){t.activeAg=e},setActiveMessage(t,e){t.activeMessage=e},setActiveDeals(t,e){t.activeDeals=e},setCompletedDeals(t,e){t.completedDeals=e}},actions:{register({commit:t,dispatch:e},s){Vt.post("register",s).then(e=>{t("setUser",e.data),Et.push({name:"home"})})},authenticate({commit:t,dispatch:e}){Vt.get("authenticate").then(e=>{t("setUser",e.data),Et.push({name:"home"})}).catch(t=>{console.log("error")})},login({commit:t,dispatch:e},s){Vt.post("login",s).then(e=>{t("setUser",e.data),Et.push({name:"home"})})},logOut({commit:t,dispatch:e}){Vt.delete("logout").then(e=>{Et.push({name:"login"});let s={};t("setUser",s)})},searchUser({commit:t,dispatch:e},s){s?Ht.get("users/search/"+s).then(e=>{e.data.forEach(t=>{delete t.hash}),t("setSearchResults",e.data)}):t("setSearchResults","")},addFriend({commit:t,dispatch:e},s){Ht.put("users/"+s._id,s).then(e=>{t("setUser",e.data)})},removeFriend({commit:t,dispatch:e},s){Ht.put("users/"+s.userId+"/remove",s).then(e=>{t("setUser",e.data)})},setActiveProfile({commit:t,dispatch:e},s){t("setActiveProfile",s),Et.push({name:"profile",params:{profileId:s._id}})},deleteUser({commit:t,dispatch:e},s){Ht.delete("users/"+s).then(t=>{console.log("successssssssssss")})},editProfile({commit:t,dispatch:e},s){Ht.put("users/"+s._id,s).then(e=>{t("setUser",e.data)})},updateRating({commit:t,dispatch:e},s){Ht.put("users/"+s._id,s).then(t=>{console.log(t.data)})},initiateAgreement({commit:t,dispatch:e},s){Ht.post("agreements/",s).then(e=>{console.log("agreement initiated"),t("setActiveAg",e.data)})},getMessages({commit:t,dispatch:e}){Ht.get("/agreements/negotiations").then(e=>{t("setMessages",e.data)})},getActiveDeals({commit:t,dispatch:e}){Ht.get("/agreements/active").then(e=>{t("setActiveDeals",e.data)})},getCompletedDeals({commit:t,dispatch:e}){Ht.get("/agreements/closed").then(e=>{t("setCompletedDeals",e.data)})},editAgreement({commit:t,dispatch:e},s){Ht.put("/agreements/"+s._id,s).then(s=>{let a={};t("setActiveAg",a),e("getMessages")})},acceptAgreement({commit:t,dispatch:e},s){Ht.put("/agreements/"+s._id,s).then(s=>{t("setActiveAg",s.data),e("getMessages")})},deleteAg({commit:t,dispatch:e},s){Ht.delete("/agreements/"+s._id).then(t=>{e("getMessages")})},closeAg({commit:t,dispatch:e},s){Ht.delete("/agreements/"+s._id).then(s=>{t("setActiveAg",s.data),e("getActiveDeals"),e("getCompletedDeals")})},setActiveAg({commit:t,dispatch:e},s){t("setActiveAg",s)},setActiveMessage({commit:t,dispatch:e},s){t("setActiveMessage",s)},rateUser({commit:t,dispatch:e},s){Ht.put("users/"+s.profileId,s).then(e=>{t("setActiveProfile",e.data)})}}}),Kt=s("9483");Object(Kt["a"])("/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(t){console.error("Error during service worker registration:",t)}}),a["a"].prototype.moment=_.a,new a["a"]({router:Et,store:Gt,render:function(t){return t(zt)}}).$mount("#app")},"5c29":function(t,e,s){},"5d7a":function(t,e,s){},"62a0":function(t,e,s){t.exports=s.p+"img/LoanShark-white.405e963d.png"},"64a9":function(t,e,s){},"8ba0":function(t,e,s){"use strict";var a=s("5d7a"),i=s.n(a);i.a},"9a41":function(t,e,s){},"9a5c":function(t,e,s){"use strict";var a=s("5c29"),i=s.n(a);i.a},a0a2:function(t,e,s){},b725:function(t,e,s){},cccb:function(t,e,s){"use strict";var a=s("d563"),i=s.n(a);i.a},d563:function(t,e,s){},f90e:function(t,e,s){"use strict";var a=s("b725"),i=s.n(a);i.a}});
//# sourceMappingURL=app.f9403d09.js.map